<!DOCTYPE html>
<html>
<head>
<title>tReeact</title>
<meta charset="utf-8">
<script src="ejs.js"></script>
<!-- <script src="tXml.js"></script> -->

<script src="treeact.js"></script>
<script>
  // setting up the templateManager
  var templateManager = new TemplateManager("EJS");
  EJS.type = "[";
  templateManager.fileExtension = 'ejs.html'
  templateManager.basePath = "./templates";
  templateManager.nameOfTemplatemanager = "tM";

  var tReeAct; // will be the instance of TReeact

  // init after the document is loaded and body is available
  window.addEventListener("load", function () {
    // create the tReeact
    tReeAct = new TreeAct(document.body);


    tReeAct.addComponent('myListEventComponent',{
      init:function(el, tReeAct){},

      didRender:function(el, tReeAct){
        // add some eventlistener to an element
        var color="white";
        el.addEventListener('click', function(e){
          color = (color == 'white') ? '#0099ff' : 'white';
          el.style.backgroundColor = color;
          window.xml = templateManager.render("ejs/test", {
            "name": "Tobias",
            "age":c++,
            pJSON:false
          });
          tReeAct.render(xml);
        });
      }
    });
    window.xml = templateManager.render("ejs/test", {
      "name": "Tobias",
      "age": 26,
      pJSON:false
    });
    tReeAct.render(xml, function(){});

    var c = 0;
  /*  setInterval(function(){
      c++;
      var xmlString = templateManager.render("ejs/test", {
        "name": "Tasd "+c,
        "age": c,
        pJSON:{'look':c+', thisis', json:'data'+(c*c),bla:{sadf:'asdf'+c}}
      });
      tReeAct.render(xmlString);
    }, 3000);
*/
  });
</script>
</head>
<body>
</body>
</html>
